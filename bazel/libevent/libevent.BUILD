licenses(["notice"])

# Modified from https://github.com/mzhaom/trunk/blob/master/third_party/libevent/BUILD

cc_library(
    name = "libevent",
    srcs = [
        "bufferevent-internal.h",
        "changelist-internal.h",
        "defer-internal.h",
        "evbuffer-internal.h",
        "event-internal.h",
        "evmap-internal.h",
        "evrpc-internal.h",
        "evsignal-internal.h",
        "evthread-internal.h",
        "ht-internal.h",
        "http-internal.h",
        "iocp-internal.h",
        "ipv6-internal.h",
        "log-internal.h",
        "minheap-internal.h",
        "mm-internal.h",
        "ratelim-internal.h",
        "strlcpy-internal.h",
        "util-internal.h",
        "buffer.c",
        "bufferevent.c",
        "bufferevent_filter.c",
        "bufferevent_pair.c",
        "bufferevent_ratelim.c",
        "bufferevent_sock.c",
        "compat/sys/queue.h",
        "epoll.c",
        "evdns.c",
        "event.c",
        "event_tagging.c",
        "evmap.c",
        "evrpc.c",
        "evthread.c",
        "evutil.c",
        "evutil_rand.c",
        "http.c",
        "listener.c",
        "log.c",
        "poll.c",
        "select.c",
        "signal.c",
        "strlcpy.c",
    ],
    hdrs = [
        "arc4random.c",
        "event.h",
        "evutil.h",
        "include/event2/buffer.h",
        "include/event2/buffer_compat.h",
        "include/event2/bufferevent.h",
        "include/event2/bufferevent_compat.h",
        "include/event2/bufferevent_struct.h",
        "include/event2/dns.h",
        "include/event2/dns_compat.h",
        "include/event2/dns_struct.h",
        "include/event2/event.h",
        "include/event2/event_compat.h",
        "include/event2/event_struct.h",
        "include/event2/http.h",
        "include/event2/http_compat.h",
        "include/event2/http_struct.h",
        "include/event2/listener.h",
        "include/event2/keyvalq_struct.h",
        "include/event2/rpc.h",
        "include/event2/rpc_struct.h",
        "include/event2/tag.h",
        "include/event2/tag_compat.h",
        "include/event2/thread.h",
        "include/event2/util.h",
    ],
    includes = [
        ".",
        "compat",
        "include",
    ],
    copts = [
        "-DHAVE_CONFIG_H",
        "-fno-strict-aliasing",
    ],
    deps = [
        "@//bazel/libevent:libevent_config",
    ],
    visibility = ["//visibility:public"],
)
